
FROM node:24-bullseye
WORKDIR /usr/src/app

# Ensure build tools are available for native modules like sharp
RUN apt-get update && apt-get install -y python3 make g++ && rm -rf /var/lib/apt/lists/*

# Install dependencies first to leverage Docker layer caching
COPY package*.json ./
RUN npm install 


# Copy the rest of the application source
COPY . .

ENV APP_NAME Zenova

ENV HOST localhost
ENV PORT 8000

ENV DATABASE_URI mongodb+srv://joseph:admin@cluster0.xtpdu2w.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0


ENV JWT_ACCESS_TOKEN_SECRET_PRIVATE 'LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeEFhTnlZTXR0QVlwM3pTWjlrWnJqYjgwaG84ZEZFQiszM1pFOGZZdWlwMEhhenprClJsOXVmbzZKSmVmSTNid09KR1FzRWJ4cHQ0dm5mVHdaQTFqY0paVy9hdHFWZGRldzl6TnhTell3ZjRhNUNKTk4KMHhnVTBVNlRwREVrbk5kTS9aR2VDTFN6dDhUR0VpTkhHQ2RJNXNwZ3ZNTTZFRVpLZ0c5N2c5OU9LUmJQTEZNUgpFVlRJK003NFQyUmp0NFlubWprYTFaeWpvNUYwQ3NhSjI2NElmMjQ4ODdnQkRRVk1QT3JINmV5d1FMUXNCSFNNCmtWQ1dSbzd0TDc2VnZaSkhGMkVlb0VzZXZxQ0hocGdRTzBoTXlHbWNFOXhWYjBZNFZNTzVTZURpcndHa3JTVEoKditVNHZxUEJER2kvMEY2QitQOUJ4aWhUTmRNY2l0cHRPUDlaaXdJREFRQUJBb0lCQUNWUkNoVGVnQWpSVTQ5RwpPRGtGMXR1NUZvcTNHOVlMSVJ2eEs5YlVBckFvakkwQm5vTTNENVhRRkpPK3VDSmQ5bU0vSHBTUnhaNUhaOTRUClhyK2dYdWhZeFlQVjhMWHFSYW9KaFB2SWFSc2R6b092WnhWVWRFSVVMMDhHZSszUG5yeDJ5QnJvSzM1RVcyQ0EKanJ3dVhsWnhHRkZXNk9ySU5zNlVhbk1FUTZEV2ZOUFBQeURDb0hBM1hVQzJRQ2hKbDNtTlRZcFZDTjVBS2pTMAo2TWVHb2tJMWQyMWdCSkdRaGY5eDB6alEvQlNZcGFhalJjY3NqbDF0UkNXRFJpbm9yMnhrdTdsSHJ3UjBWQmJNClp0M2sxb29vL3k5QVNVSlBxSnZBaEN4c25LejVpcHY3ZWJBS0JpQTV6dUZNUlh3b0QwL040djBiZGJ5a3hTSzMKRS9hZlZJRUNnWUVBL1MzNmU1d09weTNXRi85amFGVjJvUkprR1o4OGJuZWxidEIvNVBKOVcvUHVweURhR0M5dwpjN1RZWDF0RkEwNkh3TXNGWi85WWhmeEFHMldOcFJKcjA4U0pQTHFxWWpGRU4zRlh0SHkxT3JYWjNoVUJPL2lECjQyUXA3Mkh1WWVkWmM0TFBqSjN5RW5MYTNXdUpFT2xEN0o5bjBXdXpGMDYxNGJVWDRucXFrekVDZ1lFQXhqV1YKTGN0QldNNy9mbzU1bmtGR21yMC9wR1BnUStETXZVOU9WRGcrTGlETm00TEZQeGk4cVpWMFJiTy84NzhiTi9ERwp5dzR2dzBMRHFtcnBOZi8xd0VwTjAxUHp5djY1SWFVZmswT0wxc0EvUjA1bVgrcE9OdFJYek1KcjlJOFBYMEwrCjIrRnhWeXNKZ0tsRFdiS0s0RjhsODBtcDg1Y2VnYTJ6b1lheWNYc0NnWUVBbGJWM2RWcHRhN3YxNmxEUkZtUGEKOXhucDZTQzQybFdUbEhoaitCelB0ZTBEUlA1dkdIZ00xYzZ0VjQyZnZIbldXbEZ5eS9FNUJsbUlDdXM5Rzh4Tgp5SFpoOUhBb3lsRjVsaE5HbW1wWHUvVEdkTVVVNnNKa01yVUsrd3Q4cTVYaTFpUVcySDZaSXdHWm0rNjNxVEZXClFmaHNxbkEyQVdWQXRjdWc2UUpDRlRFQ2dZQnBwZDNpRHRqQjhYT1ZqWE9kdXNWYmJVd2kzMm1HUktoY3I0emMKcnkzVmdINlhTVmpCalBuaW1scmpYREFRUitqR0pIeVJkdnBXWlp2TmxqYkFKYkpqMERjelVTZzlKeENlc2xqbQpNYmF6dkx6OTBQZ1lYOWRZdWs0aVFlOHc1NkFWOHF2Tm41aStFWjU3Q2Ixd2JnNUFFZmMwZWlzd1AzaHZQcHJrCm1kczdTUUtCZ1FEZXdIZUhUd2htZkdSYy8wQ1RSR3ROL0M0Uy9XU3NRSnRtcnJpQ3dhNytUeHlLbTMxMkxWS2MKa01LanBBWVVLQUc3RnFJQ1E4M3phZjdqdHJEdG9OTFZ3Q2xyem94ZWhIc0drNThxblozbVJnNjFZc2ZxaXJhUApMaWxBZ3VLTjE5bkltYjdYWDdtKzlwTnEwOGpka293WWgxcmt4a1gzNFlCTlFCNFkxbmpCMFE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo='
ENV JWT_ACCESS_TOKEN_SECRET_PUBLIC 'LS0tLS1CRUdJTiBSU0EgUFVCTElDIEtFWS0tLS0tCk1JSUJDZ0tDQVFFQXhBYU55WU10dEFZcDN6U1o5a1pyamI4MGhvOGRGRUIrMzNaRThmWXVpcDBIYXp6a1JsOXUKZm82SkplZkkzYndPSkdRc0VieHB0NHZuZlR3WkExamNKWlcvYXRxVmRkZXc5ek54U3pZd2Y0YTVDSk5OMHhnVQowVTZUcERFa25OZE0vWkdlQ0xTenQ4VEdFaU5IR0NkSTVzcGd2TU02RUVaS2dHOTdnOTlPS1JiUExGTVJFVlRJCitNNzRUMlJqdDRZbm1qa2ExWnlqbzVGMENzYUoyNjRJZjI0ODg3Z0JEUVZNUE9ySDZleXdRTFFzQkhTTWtWQ1cKUm83dEw3NlZ2WkpIRjJFZW9Fc2V2cUNIaHBnUU8waE15R21jRTl4VmIwWTRWTU81U2VEaXJ3R2tyU1RKditVNAp2cVBCREdpLzBGNkIrUDlCeGloVE5kTWNpdHB0T1A5Wml3SURBUUFCCi0tLS0tRU5EIFJTQSBQVUJMSUMgS0VZLS0tLS0K'
ENV JWT_ACCESS_TOKEN_EXPIRATION_MINUTES 15

ENV REFRESH_TOKEN_EXPIRATION_DAYS 750
ENV VERIFY_EMAIL_TOKEN_EXPIRATION_MINUTES 1440
ENV RESET_PASSWORD_TOKEN_EXPIRATION_DAYS 7

ENV SMTP_HOST smtp.gmail.com
ENV SMTP_PORT 587
ENV SMTP_USERNAME wonder.creative.studio9@gmail.com
ENV SMTP_PASSWORD jtxv xmrq ynrd tqhr
ENV EMAIL_FROM wondercreativestudio@gmail.com

# FRONTEND_URL = 5000

# IMAGE_URL =  http://localhost:5000/

# NODE_ENV = production 



ENV OPENROUTER_API_KEY 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 

ENV ELEVENLABS_API_KEY your_key_here 

ENV FCM_SERVER_KEY BBFXxLy1beZe_W8DnJQn7prJ0LvntFoElwhmeJCdpdXLK0pL540kXKXTmADg-2KHwpfdq0iozjUqbTFdYH4-Uzo 

ENV FCM_PROJECT_ID zenova-71ca1
ENV FCM_CLIENT_EMAIL firebase-adminsdk-fbsvc@zenova-71ca1.iam.gserviceaccount.com
ENV FCM_PRIVATE_KEY "-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCn7iNSHyGY+1xI\n7cQ5xxRCv8dXxi/8h+wZswpybQ1ZKf4gEuOxhwkS7vXiuhTekbVpb1ZZvP3ohPMR\nqI6RAsZhJ8OB0qY9CMYqmWPbYPqUgSdCYXNhYoAAxy+coIeNuldWija583YludhO\nJybydDcv6+SA1213sOPvby9QmBBIilnCukVMRxK/OqATzoWhKSQbQXrS0SVMHu3D\nNd8AsSe+V7gy0krg7Y0sn6U0Lc8SaN7/r18109Tvmz5GtguI4rQP/Z8kvca4tmh3\n9AU5cE8vJUm8lIMGYbGlIGBCnRcRjrA7AXhW4+Zz2w0JNPHkp77mM2FMnFDsx1RJ\nSPbofNQzAgMBAAECggEAKKrb9ORDH6gntiWWcqOKfYux+8isEEzeWW7pZcKRC/nG\naAALEg/wm5wxAcIskaXZt/nVgI/rMWcY8jrOo8F3R0n457Sau4cnbmONMjBvHo2U\nc1fkOD5BX27dUeHyUdlBk1yPWkLiZsp13p9OqEKKptlKkgUZpnW5DV/wpmTc9KPf\nrmRMpIQPs8RjBNM5qpMmx3iC0Rt6FZq0YuN2WZkA6hAXYWB8ZTWYnrgCIvnx0J/n\n8sC33vJRWhGsqwuUGajBdkob1QY5tk4o5FM0ZSdMuhvYM8zcYDmhuEC1C+q94HMh\nWzUIKzItzE29NieRkdMdZLnPHEHcDl2J/yQIYwmKeQKBgQDj/OsF8SL/OKWyBAZW\np35V+bMPq8oOiNJjy1G2JCSzNqpZ2DdnoqhLx/5160U4S6in0WLotUy49HAqkGjt\nas9T++alL0HN7YqF6XGUdVgv7eMrWCXuqWhXgYZ0QEEPfIzDQ1Yku/XcFxiCnlc4\nv+/ts/GH8FDAmT0f4QF+7arfHQKBgQC8kC1uJvsqvVeCmY+XY2cRxT1Hn8XCVj9D\nmXfoMfe6VvsC7/iwBOVltn7g4Hs26AP3+QKoafFSI7wjhipKX99anBKvEKFVUrr8\n0yANPOGGF/CkDTc8CJ0fEpwDlM6/9iif8OeM1LfcF/Tj8ODK2Q6cBKNfvSgWt+AT\nQ+fK972PjwKBgQCEOz4pHRn6Q2W/IRx4B/97aC8V6MJxuaOlI9jJtp7entcg8wn3\nftzzzxRkWke0hhVU+FnQtM7B+2xPE6D4CtojUNgOeKFHCf4s+x/YRlMWwXffvOmL\nShBtqH9OT7IshEW0PwrolWfc9jxODf5yuMg06wgsmxKLEpXkNoHCl6BidQKBgDpH\nGTNlKtVvxX8gtMdmOnG8kw7y62z/uPfMk8mYv+bAgT3MKwFD0h5Yg+g+mPZESQ23\n0UF51NK9JqWYDrQD44UenYurySEUu6PuIIbW3SDTf1VEnGCajO0QlFVrBWdAzhd4\nnifhip2kbdSRGvi2kxRXPqMVVDGJTODHaPlLDjQzAoGBAI+wOGDFNlFCPcflHmG3\noDGA098aLKX4Jx7mHjR79TtgLA6v4gYEHXS1aRzQWHgoaVGh4Nx8zFDLZFt1Be4I\nYjn6Azch6DyC9REw79ddEWzDXX2pF+eX/1qnWzXz54OomW74+bXiAHHss4Utzr4b\nNGx6D6Yi+pEB0Mbo6K9ffpAa\n-----END PRIVATE KEY-----\n" 


ENV REDIS_URL redis://default:AbC123xyz@redis-17514.crce179.ap-south-1-1.ec2.cloud.redislabs.com:17514

# FRONTEND_URL = 5000

# IMAGE_URL =  http://localhost:5000/

# NODE_ENV = production 



ENV CLOUDINARY_CLOUD_NAME djp3ztex2
ENV CLOUDINARY_API_KEY 186524345228847
ENV CLOUDINARY_API_SECRET 1JXq9XgCm_C1CSBRiCCFo4vCFDE 
ENV CLOUDINARY_UPLOAD_PRESET edu_stack

ENV GOOGLE_CLIENT_ID 26695047508-030ervnb6guv8tn1cjuhqvm3sj4qhn6g.apps.googleusercontent.com
ENV GOOGLE_CLIENT_SECRET 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 

ENV APPLE_CLIENT_ID com.zenova.app 
ENV APPLE_TEAM_ID YOUR_APPLE_TEAM_ID
ENV APPLE_KEY_ID YOUR_APPLE_KEY_ID

ENV EXPOSE 8000

CMD ["npm", "run", "dev"]
